import { test, expect } from '@playwright/test';
import aws_utils from '../z_experiment/test_util';



test('extract rendered HTML and find price', async ({ page }) => {
  test.setTimeout(100 * 60 * 1000);
  const startTest = Date.now();
  let countDeleted = 0;
  const statusToSearch = "inactive";
/////// *********************************************************************************************///////
/////// *********************************************************************************************///////
/////// *********************************************************************************************///////
/////// *****************  Section#1: collect outherHtml from all available pages  ******************///////
/////// *********************************************************************************************///////
/////// *********************************************************************************************///////
const dateStr = aws_utils.todayDateSignature();

await aws_utils.loginToAWS(page);

await page.goto('https://sellercentral.amazon.com/myinventory/inventory?fulfilledBy=all&page=1&pageSize=25&sort=date_created_desc&status=all&ref_=xx_invmgr_dnav_xx'); //status=all
//  await page.pause();


const allRawAsinOld =`B00U5TX3G4 | TRIO-444552 | ECOMP-261080 | Ryobi P541 P542 Chainsaw (4 Pack) Replacement Sprocket - 610323001-4PK
B00QL10W4Q | TRIO-253023 | ECOMP-099836 | Homelite Ryobi Toro Trimmer (2 Pack) Replacement Fuel Line # 5688002-2pk
B00FEQR8GE | TRIO-444403 | ECOMP-260931 | Zama Genuine OEM Primer Bulb (2 Pack) # 0057030-2pk
B078KB3YC5 | TRIO-444388 | ECOMP-260916 | Homelite Chain Saw OEM Replacement Gaskets - 02453-2PK
B00ICMD5YG | TRIO-444400 | ECOMP-260928 | Homelite/Ryobi Trimmer (2 Pack) Complete String Head Assembly - 000998265-2PK
B0786RKPW9 | TRIO-444417 | ECOMP-260945 | Homelite 2 Pack Of Genuine OEM Replacement Gaskets 06839-2PK
B0786PND2G | TRIO-253350 | ECOMP-100163 | Homelite 2 Pack of Genuine OEM Replacement Washers 678434002-2PK
B078P9RMZ1 | TRIO-444413 | ECOMP-260941 | Homelite String Trimmer Replacement Adapter Shafts - 04355-2PK
B00U5TUFEM | TRIO-444640 | ECOMP-261168 | Ryobi Homelite Trimmer (4 Pack) Replacement Wing Screw - 660886001-4PK
B0786QRFLG | TRIO-253365 | ECOMP-100178 | Homelite 2 Pack OF Genuine OEM Replacement Tension Nuts - 678618003-2PK
B0798V78K8 | TRIO-253396 | ECOMP-100209 | Homelite Generator Replacement Engine Isolators - 679940003-2PK
B00U5TZ6GY | TRIO-252981 | ECOMP-099794 | Ryobi Ridgid BackPack Blower 4 Pack Air Filter Cover Knob - 5946101-4PK
B00QL16XNK | TRIO-444416 | ECOMP-260944 | Homelite Ryobi Trimmer (2 Pack) Replacement Spring # 06713-2PK
B0786TPQY4 | TRIO-252680 | ECOMP-099493 | Homelite 2 Pack Of Genuine OEM Replacement Clamps 348005003-2PK
B0786RVLRT | TRIO-253395 | ECOMP-100208 | Homelite 2 Pack OF Genuine OEM Replacement Isolators - 679940002-2PK
B00QL17CYY | TRIO-444445 | ECOMP-260973 | Homelite HL252300 Washer 2 Pack Recoil Starter Assembly - 099980425056-2PK
B00U5TX3G4 | TRIO-444552 | ECOMP-261080 | Ryobi P541 P542 Chainsaw (4 Pack) Replacement Sprocket - 610323001-4PK
B0798VD3VV | TRIO-253379 | ECOMP-100192 | Homelite Replacement U Clips - 678799013-2PK
B0786XHH6T | TRIO-252519 | ECOMP-099332 | Homelite 2 Pack Of Genuine OEM Replacement Shear Blade Assemblies 310964001-2PK
B0798W4159 | TRIO-253397 | ECOMP-100210 | Homelite Generator Replacement Isolators - 679940004-2PK
B00KB7IZ0Y | TRIO-203996 | ECOMP-050809 | Homelite Ryobi Trimmer (2 Pack) Replacement Clutch Assembly # 300960002-2pk
B00U5TYVWE | TRIO-204079 | ECOMP-050892 | Ryobi RY08574 Blower (2 Pack) Replacement Tube Clamp - 308645001-2PK
B00U5TU7WC | TRIO-349045 | ECOMP-195858 | Homelite Ryobi Toro Trimmer 2 Pack Throttle Trigger Spring - 690694002-2PK
B00ICMC6PK | TRIO-252717 | ECOMP-099530 | Homelite/Ryobi 518019004 Hanger Caps, Pack of 5
B00EO2DSX6 | TRIO-252801 | ECOMP-099614 | Homelite/Ryobi Tri-Arc Blade (2 Pack) # 638006004-2pk
B00U5TY02U | TRIO-444644 | ECOMP-261172 | Homelite Ryobi Blower 4 Pack Momentary Contact Switch - 760338004-4PK
B0798TYVSC | TRIO-252486 | ECOMP-099299 | Homelite Replacement Soap Tank Caps - 310650004-2PK
B00ICMEGVM | TRIO-204026 | ECOMP-050839 | Ryobi RY34421 Homelite UT33600 (2 Pack) LH Thread Spool Retainer # 308042003-2PK
B079B1D31P | TRIO-203309 | ECOMP-050122 | Homelite 2 Pack Genuine 985304001 Inline Fuel Fitting Fits Ryobi OEM
B078VFR99Y | TRIO-203214 | ECOMP-050027 | Homelite Chain Saw Replacement Chains - 901212001-2PK
B01GX9YZ4I | TRIO-355694 | ECOMP-202507 | Vulcan Hart 00-426602-00004 Flex Tube &amp; Batt/3 Units Up
B0DWH3W2DF | TRIO-294250 | ECOMP-141063 | MTD 753-05756 Blade Line Refills for Aero-Flex 8 Pack for Troy-Bilt Craftsman TrimmerPlus WS430 WS410 WS230 TB685EC
B008HOXJQI | TRIO-145584 | METRO-001719 | Honeywell, Inc. 0901116A FOR USA MARKET. STEM BU- TTON FOR V5011N &amp; V5013N VALVES. OFFERED IN BAGS OF 10 PCS. MADE OF STEEL.
`;
const allRawAsin = `B00ENL6IJY | TRIO-350028 | ECOMP-196841 | TRUE 830277 4" Castors Set Of 4
B00ENLL4Q6 | TRIO-482576 | ECOMP-299104 | Garland 4523903 Briquettes - 126 Pcs
B088M44H4M | TRIO-446001 | ECOMP-262529 | 2 Pack Honda 17211-896-000 Air Filter Element Fits G100K2 EG650 WA15 WB15 OEM
B076FFXP7D | TRIO-480681 | ECOMP-297209 | Grindmaster Cecilware V002A Basket, 718 Filter (Brew), S/S - F
B00FEQR8GE | TRIO-444403 |  | Zama Genuine OEM Primer Bulb (2 Pack) # 0057030-2pk
B00QL17FUK | TRIO-444451 |  | Homelite HL252300 2 Pack Fuel Strainer - 099980425078-2PK
B0786PND2G | TRIO-253350 |  | Homelite 2 Pack of Genuine OEM Replacement Washers 678434002-2PK
B000P8OCNS | TRIO-354168 | ECOMP-200981 | RYOBI OEM OSS500-02 Upper Spindle Washer Set 3 Pc
B0038U3J7K | TRIO-433148 | ECOMP-249677 | Briggs &amp; Stratton 394358B 100-Pack Of 394358S Fuel Filter Assembly 75 Micron
B01GX9YZ4I | TRIO-355694 | ECOMP-202507 | Vulcan Hart 00-426602-00004 Flex Tube &amp; Batt/3 Units Up
B0186JQPYQ | TRIO-445011 | ECOMP-261539 | Honda 31638-ZW5-004 Belt (4Pk720 M150)
B08B1JF5T2 | TRIO-446933 | ECOMP-263461 | 2 Pack Genuine Honda 42710-VL0-T00ZA RR Wheel NH462R Fits HRR216K10 '18
B0FCVS4WXP | TRIO-446934 | ECOMP-263462 | Honda 42710-VR8-N00ZA Rear Wheel for HRN216 VKA, VYA and VLA Series 21" Lawn Mowers - Pack of 2
B00HL34OQK | TRIO-447782 | ECOMP-264310 | Honda (2 Pack) 90502-VG3-000 HRB216 HRB217 HRR216 HRS216 HRT216 HRX217 Rotary Blade Spring Washer New OEM
B08738DG1X | TRIO-446536 | ECOMP-263064 | Honda 2 Pack Genuine 22431-VL0-B00 Mower Drive V-Belt 3L-37 OEM
B004RZ45IW | TRIO-445927 | ECOMP-262455 | Honda 16910-GB2-005 Filter Fuel
B0873BF9GT | TRIO-445928 | ECOMP-262456 | Honda 2 Pack Genuine 16910-Z4E-S21 Fuel Filter OEM
B01IPG8QQK | TRIO-448175 | ECOMP-264703 | Honda 98079-5587G Pack of 2 Spark Plugs (ZFR5F)
B01J1SL0QY | TRIO-448151 | ECOMP-264679 | Honda 2 Pack Genuine 98073-54744 Spark Plug Fits NGK BMR4A OEM
B01CXCHEJ2 | TRIO-448178 | ECOMP-264706 | Honda 2 Pack Genuine 98079-56846 Spark Plug Fits NGK BPR6ES OEM
B01IO2ZL4K | TRIO-447324 | ECOMP-263852 | Honda 2 Pack Genuine 76153-V41-000 Snowblower Auger Skid Fits HS1332 HS928K1 OEM
B01CXC2BGI | TRIO-448150 | ECOMP-264678 | Honda 98056-55777 Spark Plug CR5HSB - 2 Pack
B01CXBMOKW | TRIO-447323 | ECOMP-263851 | Honda 2 Pack OEM 76153-743-611 Auger Skid HS1132 HS522 HS622 HS624 HS724 HS828
B08B1JJKTC | TRIO-447377 | ECOMP-263905 | Honda 2 Pack Genuine 76728-V45-A20 Auger Skid Fits HSS724A HSS928A AW AWD
B01CXAA9BY | TRIO-447187 | ECOMP-263715 | Honda 68325-Z07-003 PK2 Lower Rubber Foot Pads
B087LFNF6M | TRIO-448063 | ECOMP-264591 | 2 Pack Genuine Honda 90757-767-000 &amp; 94201-30450 Pin &amp; Split Cotter Pin OEM
B08157KRC1 | TRIO-445110 | ECOMP-261638 | Honda 5W30 Engine Oil (4 Pack) - 08207-5W30
B087F14LSH | TRIO-446922 | ECOMP-263450 | Honda 2 Pack Genuine 42661-VH7-000 Pinion Gear 13T Fits HRX217 HRR216 OEM
B00GARUG42 | TRIO-445738 | ECOMP-262266 | Honda 16221-ZN1-000 Pack of 3 Carburetor Gaskets
B08GHTQSHY | TRIO-445375 | ECOMP-261903 | Honda 2 Pack 15400-ZZ3-003 Oil Filter for GCV530 H4514H H4518H 15400-PFB-014 OEM
B08H7FG1JR | TRIO-445983 | ECOMP-262511 | 2 Pack Genuine Honda 17210-Z1C-781 Round Cyclone Air &amp; Pre Filter Fits GX270 OEM
B08H6YCKXB | TRIO-445982 | ECOMP-262510 | Honda 2 Pack Genuine 17210-Z0V-781 Round Air Filter &amp; Pre Filter OEM
B01INIKU2S | TRIO-445988 | ECOMP-262516 | Honda 17210-Z4M-821 Air Filter, Pack of 6
B087RM77TH | TRIO-446007 | ECOMP-262535 | Honda 2 Pack Genuine 17211-Z0H-800 Air Cleaner Element Fits GX25 FG110 OEM
B087YWTR8R | TRIO-445735 | ECOMP-262263 | Honda 2 Pack Genuine 16221-ZH8-801 Carburetor Gasket GX110 GX120 GX160 GX200
B0C9SMMJFX | TRIO-445566 | ECOMP-262094 | Honda OEM 16100-Z8B-902 Engine Carburetor Assy. GCV160LA1 S3B/A GCV160LA1 S3LB/A HRS216K7 PKAA HRS216K7 VKAA
B01CUHXBM4 | TRIO-446023 | ECOMP-262551 | Honda 17211-ZL8-023 PK2 Air Cleaner Elements
B087TWCHVY | TRIO-446006 | ECOMP-262534 | 2 Pack Genuine Honda 17211-Z0H-000 Air Cleaner Element Fits GX25 HHT25S WX10
B001DJCQIG | TRIO-453392 | ECOMP-269920 | Jet Tools - Collection Bag, Clear Plastic 14" Diameter (pack of 5) (709565)
B0BGFL5517 | TRIO-452509 | ECOMP-269037 | METABO SDS+ 2CTR 1/2" X 4 X 6 - Bulk (25) (674566000)
B00O64VHBC | TRIO-450387 | ECOMP-266915 | Hitachi 881555 Set Of 4 Gaskets Ec12 Ec19Sa Replacement Part
B00OD4X8F8 | TRIO-450977 | ECOMP-267505 | Hitachi 949507 Roll Pin D2X14 Wh22Sa Replacement Part, 10-Piece
B0CB7596NL | TRIO-429874 | ECOMP-246403 | Toro Part # 106636 Blade Kit - 3 Pack
B01JKT49T4 | TRIO-347179 |  | (Ship from USA) TORO (SET OF 2EA) BEARINGS &amp; RETAINERS PART# 104-8698 &amp; 104-8699 /ITEM NO#8Y-IFW81854280914
B0DWH3W2DF | TRIO-294250 | ECOMP-141063 | MTD 753-05756 Blade Line Refills for Aero-Flex 8 Pack for Troy-Bilt Craftsman TrimmerPlus WS430 WS410 WS230 TB685EC
B07R4RKLJ2 | TRIO-152519 | METRO-008654 | RIB Enclosed Relay RIBH1C, 10A, SPDT, 10-30VAC/DC/208-277VAC(Pack of 5)
B077H1FKGT | TRIO-152658 | METRO-008792 | 3 Pack Of Robertshaw 1980-036 36" Snap Fit Thermocouple For Honeywell Q340A1090, Q390A1061
B004N7413S | TRIO-148079 | METRO-004213 | Trion G-206-6 Humidifier Filter for Model G-200 (6 Pack)
B005HR2IME | TRIO-148256 | METRO-004392 | LF24-MFT US Spr.Rtn.Act 24V 35 in-lb (4Nm) 2-10VDC
B07L3SQDBB | TRIO-148163 | METRO-004298 | Belimo LF120-S Us Spr.Rtn.Act 120V 35 In-Lb (4Nm) On-Off 1 Aux. Swit
B003C2E8EM | TRIO-147281 |  | Honeywell 203369 F50F F300 Prefilter - 2 PACK
B017WPR2CO | TRIO-147341 | METRO-003476 | Rheem Ruud 75-22840-02 - Replacement Inshot Burner Tube (4-Pack)
`;
let tmpArr = allRawAsin.split("\n");
// const allAsinsToDelete = [];
// for (const line of tmpArr) {
//     const nArr = line.split(' | TRIO-');
//     allAsinsToDelete.push(nArr[0].trim());
// }                                                                            yesterday:9     today: 31  B008G4BUQ0
let ii = tmpArr.map(line => line.split(' | TRIO-')[0].trim());
// const ii = allAsins.split(',').map(asin => asin.trim());

let allAsinsToDelete = "B08MT2QYZQ,B07P2L8VSN,B06Y6H22CJ,B00B13WRR4,B00GCVFI6W,B012AUPIAY,B009EC0KXC,B01CYK1YLC,B083JKF2YZ,B00AG6VI90,B00MI8YIWS,B08D3JM8XQ,B00ZE8B624,B07P7LH46T,B013TEHRHM,B00DNGSDUC,B0186KHHRY,B087TP82X2,B00TD8MDFA,B01FZYAIU2,B00EODCWSW,B00FB3RP40,B076GZXWLM,B083Q3MFVK,B00FB3X3N2,B0CSZ6WMQN,B087QTXV5S,B00FB3XVFM,B014PBV2NI,B00U5U00UA,B07H7S8R3R,B083G8JMS9,B07WZ6FX4C,B00N993MYU,B00FB3YB38,B00H04PAZ4,B087LB2M7B,B013TD3F56,B09K4NCBJH,B08D3CTCR5,B00HV0NOWS,B01N9LW1X6,B00TW2B86C,B00W1MMU4E,B076GMPH78,B018596M8Q,B005MRUVGY,B005MRY6NS,B0185ZVCBW,B013TCS74G,B01DV2TJSC,B0185ZVC5S,B087RKC9DZ,B00TGCGKUC,B0185ZNKL2,B01CYXKCMG,B076FHHHLB,B0CSPRGRXQ,B01KP75V88,B08D3DRPDW,B00QMKKZ20,B07MV3WMRC,B013TEEAWW,B08B1H77CV,B000OVE2AY,B01CINFAJC,B00KB7QC04,B00R23GN36,B002LWRB4I,B087ZWMMB3,B01GODDUY4,B06Y8VYPQS,B0CQ8RH21P,B07JQ4KZ9W,B01FZYAY4M,B0B548FWKB,B09K4PX9M7,B01C4YNY84,B06XQK1HRG,B00GNOHSW0,B06Y47K3H6,B009L5MDJQ,B01F6BXW3Y,B0C9F5GXS7,B009EC6KNG,B0CC3V648P,B01KRIJKVO,B06Y8YGD25,B07P4RDY21,B076GMSV6S,B0C94Z8GNL,B06XCNHBDK,B00TD5KR7O,B076G22RSY,B08D37PF57,B076VVR5JB,B083JKQTCX,B0CD8PTQV1,B07LGCVNP4,B08B3H3CMJ,B00X1LEOXO,B00VVKPSIW,B00DFNZ5EU,B00KB7NJ3M,B008TSW9TA,B07C7LRNGT,B076GNTGY7,B01I48P4BE,B01FNS5YQI,B00DFNZ0PE,B01IG2MIGW,B013TDSC0O,B00F3BGZ8M,B0CKJF64V2,B0CFK7SM68,B0CS12GSB9,B0BQRX1DGR,B0CBL84MLX,B013TF2U5K,B07BHQ1X4R,B0186KJUEW,B00U5TLRP8,B09N9XW7F4,B07DCCSGCR,B01C9NTI2Q,B078ZDXCWS,B01D1N9QW0,B08D39G3KS,B0185ZOAUC,B00VV46S6Y,B00C1KNQGC,B00EC8KIVM,B019XCP9UQ,B015QIRXR8,B00U5TZNIA,B01FLBGLIW,B00TD9TF3C,B01M0468ZA,B0BQRWWY8X,B09RX412RN,B0173OO4Q6,B0888384SX,B00ENL6IHG,B08FGV6LW4,B018593S7E,B0185908P4,B00F3BGZZK,B06Y6MXNYR,B00DQD7EIE,B013TD3902,B00EG6JCNA,B01KOP2RZG,B01LYSXKRO,B00G0F6SXW,B08D941DCB,B01FZYAHNK,B09N9Y2J83,B087TXWG5Z,B004UN16U6,B089P38T7D,B01JKS1CPY,B00TD97C32,B01F6C3FLC,B00GUU3O84,B0CFDFXSWD,B00INJ4SAI,B0CF43QHYS,B00DH3X36U,B00DNTDFUM,B00J9HH1UM,B076C3MVGV,B076GMT4XV,B09J9Z6P3R,B01N4NIEEZ,B076G43Z2Q,B06Y64D6BL,B00C1KNTC8,B009EC8980,B00U5TLYEC,B087RLKC5F,B0D8WSLHX6,B0CL5LZD3G,B06Y8Z8WXH,B085KFZN9Z,B0852ZQCZM,B013TDVV8E,B00AM4TWIK,B015QIT7JA,B00DLY0822,B07J9WL56J,B09QT5DDWS,B09NP539D6,B009EC8X2W,B0CT66Z5V5,B009EC375U,B00RDFPDUC,B01I9U9GUM,B0DGNB75X4,B01D1MTW4S,B087Z65641,B081B82341,B00NG5NQSO,B08D3574KB,B0BDCF4X7H,B087Z3MC8Y,B084R9FG8F,B00ITB9HS8,B00TD997TO,B09K4P6DXR,B076FJHVZF,B08B1HLSSK,B075V7P754,B08D39L1CR,B08857GR8T,B0026AI8UG,B0026AUSPE,B00TD8KCEO,B01FNS0LNO,B00BG1TVMA,B0875K266R,B0CSHT631G,B014PBV6K2,B01FNRXWF4,B01J6VA4ZE,B0CSLGKQWT,B07VRL1Z37,B01CYK71SW,B01BZMP59M,B00DQD60UM,B009EC6CXE,B08624TGWV,B00U5TM3NS,B00EC8NDFA,B06Y6HFBWJ,B0185ZPZZ6,B09K4NCKPQ,B07WHDW6FR,B00INJ40L0,B076H35NWL,B087RLL15F,B08D3BP7NV,B076BXTTW8,B08158GR9R,B07GC8LXC8,B00K6Y0CY4,B00H04R3TA,B0173OVWZC,B00VVKP350,B00HNQDEA2,B0BCXC5T53,B087RKVDPF,B00ZS5VFYM,B00DF39SQQ,B0CBNJWNDX,B0CLVQPVTB,B0185ZQAOG,B0173OQHAC,B01MAYRXC2,B06Y93CZR4,B088F5Y463,B0BHTX4DGG,B076G498YZ,B00I3OV2LG,B005MRXBJI,B00X1LDYT4,B013TEKM06,B00M7E93IC,B013TEL9TE,B00UL793J6,B008HORY4G,B09JB57VMM,B008FM3JZS,B07HP19WBK,B00EZHHX5Y,B001HO073I,B00EZHI9CU,B079PZWXG9,B08DHPD1T2,B009PAPWQ8,B000NMH6WA,B01LY5IQ0Z,B008HOSJE0,B071X9D3CR,B008HQ6RRO,B0067LRJPU,B00C6YYWEI,B000VYOWVI,B00FQHQNI0,B008FM98NA,B00EZHHC9Q,B07B3KJY1G,B00EZHJA3C,B00FSFMYKG,B00LBI7RYC,B008FM72SS,B008HOYF2A,B014XAWDQ6,B00CPSR98G,B08V9BLXZ4,B008FM3G9W,B07R3RFZ57,B073WLDZK6,B00EZHJY24,B072R31PF2,B00QW2PV7C,B005E0N1W0,B017RQHFCU,B00QW2MBH0,B003U4OUL8,B00QW2T8EE,B00QW27YLS,B01M4LD1GF,B00EZHITCA,B007Q2FDB6,B0721QGGDP,B00NYQQHPY,B00QW2ISYU,B08V5DYMF3,B00QW20OMO,B005E0LDMK,B007IBL29M,B017WRCZRE,B008FM6YGE,B009PAZ9IE,B00EZH89DY,B00QW28TYO,B00EZH3VMI,B00QW2AQIG,B00BJQRFQG,B077Y4KX9T,B00EF4L0GA,B003U7RFXU,B008HOZEDE,B00QW2D6RO,B007R4NCV6,B072N5N6JT,B008FM3FLQ,B0BQSH6VJM,B001ZRZZ8O,B077Y3WLQ5,B009AX8LIQ,B01BTGWB4Q,B079Q7Y5VL,B002QE18A4,B00FR5HF4C,B008HOX8FU,B0CK2R22Y6,B082SWWMJZ,B009AXC8Q2,B079HPTP7X,B009AXJX4M,B0078RYOB4,B009AXGGFQ,B001DPO1RY,B001DPT7QY,B0025YSJBQ,B00VV458UG,B08D92ZKPG,B0025YMU4I,B01GXMRPFG,B009EC30FC,B00EMQU8LO,B00HNQ9V54,B00EN8J1NW,B009EC07DU,B00004UDGZ,B00ENLG0A6,B00E446M8C,B015PK3BC8,B015PK3CBI,B01DV2FIIM,B08D94DN4B,B00QW2CR5Q,B00HWS5AUS,B0DMRV5CSS,B000FBLRVK,B0025YQ8MS,B003PE97J8,B0025YMSRM,B003CZ6FWM,B08D351HKN,B00ICMGAU2,B071KCXL14,B005E0N1JI,B00QW2L9AK,B003WIAZAM,B088K8X2KN,B09QT6QCT3,B09QT6QJD5,B00MPR6FS2,B09RRCWSFC,B0BQSM8QD9,B09RRCLDZS,B09QT65QR2,B0BCS39QWJ,B09QT6BXCD,B00EMZ79LW,B09QT6NNG1,B0BCT4KLJS,B0BQSQ4VRL,B07571X7YC,B01FZYAIUM,B09QT83C9X,B075729DRV,B09RRDRWYQ,B00ELIJ7KQ,B09QT5GNZQ,B00EC8IDPK,B0BCT4FHFR,B07658JVXG,B09QT7LSM6,B00EC8LFFK,B0BQS9S17L,B0756YSYJQ,B09J9Y9ZNS,B09QT84R8B,B06XQ4GKWM,B09RRBRWKK,B00N996WG0,B09QT5Z4HT,B014ITTYAA,B00HNQ8CFY,B09QT77WWC,B07571M9X6,B09QT8M8MV,B0BCS6V9LD,B07BHM733B,B0BCSQ2XTJ,B0BCSSR77H,B0BQRX38SP,B09QT87BQH,B074CDCVV4,B09QT6P2LL,B09QT7PGCT,B00EC8QATG,B0BQSS5271,B09QT743GK,B00EN9VDCS,B0BCSBC72F,B09QT6VY89,B09QT7474Z,B0BCSC6PV7,B09RRBRZMV,B00M7DVP2U,B0BCS9G6LK,B00EC8RSHE,B00NBAMKYK,B0BCSSQ2JD,B09QT6HG1T,B00I5MXRWS,B0BCS9H6R7,B09QT6VBJB,B09RRF3GV9,B01858UWD8,B09QT6X72P,B0BQRX38V5,B09QT768PP,B09QT764F3,B09QT75ZRL,B09QT66MJ1,B00VV0GE6M,B09QT7Z7FC,B0BQSK4DNG,B09RRF2MCM,B09QT66RX1,B09QT4N71W,B07VPF6Z2K,B09RRCZY4C,B0BQSDYYHT,B0049GN95E,B0BDGJ7W3M,B0BCT72BKQ,B0BQRWYT1V,B0BQSB5QGR,B0BQS1R1BB,B00VV0FIUK,B0BCSLSK1Z,B09QT6SJXP,B009EC1X1K,B09QT6SKB3,B09QT6HMPQ,B0BCSHNLZ9,B0BQS8BWNM,B0BCSJRSKJ,B01D2N6ZAK,B09RRDG11X,B09QT82HQJ,B09RRBQTYX,B09QT5XWHS,B0BQSQ3SPL,B09QT6FMKS,B09QT7P8LM,B09RRF75G5,B008TSXC8M,B0BCSKMCLG,B09QT6LN4M,B00EMZ4Q0E,B014ITQ8EA,B0BCSY644N,B008TSZ91U,B09QT7PN9J,B0BQRXP37M,B07MV386N8,B09QT65C4C,B008TSXH7I,B09QT826WL,B09QT6WLC3,B0BCSBS3MV,B09QT5SFX1,B09K5Q98T1,B00JBS9FVC,B09QT6KY8N,B0BCSLQH8J,B00EN8KF8M,B0BCSRYSXJ,B09QT6P8DQ,B0BCSPSWNR,B09QT5GVS2,B09QT6BXF6,B09QT73VFF,B0BQRZXM22,B09QT88Y1Q,B009L5LXUG,B09QT7J33V,B09QT8C9QY,B00TD99IMK,B09QT7QWG6,B09QT867Q2,B0BQS1R1CK,B0BCT1KKZJ,B06Y6FYMGM,B09QT831LZ,B09QT6R49V,B06Y6J6ZSR,B09QT4KV7M,B01D2N7QFS,B0756YSMWS,B0BQSMMGJ6,B06Y6DDWH8,B09RRFGV9M,B01858LI5O,B00W3HWF7Y,B0BCSBQ6F7,B09RRDHXD6,B09QT6ZZ1V,B09K5RCGZH,B0BCSSHQL5,B07MV41ZPR,B00HWMXHOA,B09QT5YVNS,B09QT6ZKZC,B00CPFL46M,B01GX9W9B4,B00EMJQATK,B076FX9P3Q,B09RRF3KWQ,B09K5RLXKJ,B0195UPN3O,B01D2N6A5A,B014ISRUOS,B0B5S7Q786,B00N45D7IU,B00HQ09QES,B00VV0E7CK,B00HPZQ1B0,B00TS7P286,B08DCR57TH,B00EC8OUCA,B00BQN1NQ0,B00M7E8F4K,B008TT05ZE,B004WIJ2SC,B00HV0PLVK,B00ENL3I8S,B014ITJPU4,B01D2N6VU4,B00ELI90NU,B00894IONE,B00M7DU68E,B00EMJPJEM,B014K582NM,B01LXXIMH2,B07657FN9Y,B0756YT16W,B00VVJYEDS,B014ITICRQ,B009L5LU18,B00A4NN8NY,B00HYOIE7Q,B0756YSP4K,B06XQMM6K5,B014ISSP60,B06XQKLF68,B00EN8QVUI,B014ITLV2Y,B009EC90LA,B00Y7VOD8I,B00EMK0V5S,B00O3Z8G8Q,B014ITLSZ4,B00EC8MAYK,B07BHM3VSV,B014ITJNKQ,B00JBS6HM2,B09JBCRVPC,B014ITOGJO,B00JBS8KL8,B08DC9L8M2,B00VV0FM5G,B06Y6K8TXR,B014ITIXOS,B07FZ9T5XF,B00EZH9Y10,B008HOY5WU,B008FM2CHO,B009AXJU68,B000E297FI,B017RQWVOW,B008HOUEMU,B00QW2B9BE,B0115YHKHK,B006FNREO6,B00LCEE7Q6,B00LO3QMCC,B003F1MIMO,B008L30MF6,B004XL3G6W,B003U4N1D6,B00BTLN3LM,B018A33A46,B00EZH91Z4,B0067E6V42,B00QW27ZFS,B06XNNCFT8,B008HQ88J4,B0076RW1I4,B007RYJZIK,B00QW2BJP0,B01N2JVMLJ,B004O6I9U4,B000LER8LO,B008HQ5SO2,B003WZSA0M,B009PANUOY,B008HOZUAQ,B07J9Q5YD1,B00VWH4F1U,B016DIP54S,B008HOWQ1W,B00QW2MLBQ,B0153WTVLS,B00NCBZ5CM,B00Y1PTU74,B07D2JW23T,B0040LBZ0O,B008CPQMNO,B004QOKKDS,B00EZH4Y2E,B004SOZHR0,B00EZH0NWY,B003UBE4O4,B008HOY9IU,B003W65I8S,B00Y1PK3X4,B0015G89SI,B00EZHJDXO,B004XVLB96,B008FOQKNO,B00EZH6X1Y,B00O3Y1ZJ4,B008HOU04M,B00L3ENZLS,B00QW2F8PW,B008HOY0KM,B00EZHIWUY,B008HOTQGK,B008HQ77VE,B00EZH3TA2,B072R48G1V,B009AXG51Q,B00QW2C9T0,B00QW2E0RY,B01015K2I8,B008HQ7VF6,B071K91PPJ,B00EEDWQ8I,B00QW2UIRK,B00EKVF5UK,B00D5YH7JK,B001L4U2QG,B009AXKTEA,B008HQ31AU,B00C1WLREI,B009PASEFO,B082MPXL6Q,B07L69343R,B00EZH5VOY,B00EZHKM7A,B00HQNZQFS,B008HQ89JS,B008HOR6TY,B085LLCF4C,B00D5YDF32,B00EZHITE8,B071K91WDK,B00ET2BB08,B00EUE1VKA";
allAsinsToDelete = "B00N993MYU,B0CBL84MLX,B00EN9VDCS,B00I5MXRWS,B01858LI5O,B00W3HWF7Y,B00HYOIE7Q,B00D5YH7JK,B08S3G2BP9,B00ET2B842,B00JMJMPV2,B00QW2FUCS,B07HLWDH9X,B005E0MGMG,B00EZHM3SG,B00EZH5TO6,B00EZH7JFI,B00QW2K50A,B00095OL1A,B00EZHEUAA,B003U4J5RC,B008244RLO,B00QW2PXDY,B008HQ5QPI,B08R91R46B,B01IWJ6QRQ,B003UPYM9M,B005E0L618,B071KCB118,B00EZH958W,B00Y1PP4HY,B00EZHJI1G,B003U4KI4G,B008FM8SU4,B00PITAKNA,B081TK693M,B008HOQSVG,B00QW2RCVU,B007Q2F25I,B00B9K5SBQ,B00204O7EY,B007Q2FB8Q,B079QG2NFX,B007R4QLV4,B007RYKFN4,B08WX48RT5,B07KYQ97G2,B00EKJ0YDA,B002SMVEH6,B008FVEJVW,B072N5HZK5,B00EZHJPMS,B00NBHF7N4,B0741CJWDD,B06XNNCKJH,B008HQ76OC,B006W1EWK0,B006XFAF74,B00093D1CC,B00E0Q5N5C,B00EZHKTPU,B017RQPNXI,B01IWI4HPK,B07R8YGJZP,B072N5NMW3,B01B5ITC0E,B00H5BZ7KK,B00M0WXXTG,B009AXSDCU,B0044PSLFI,B008FM7ECC,B00QW2UCLW,B072KKVTHR,B08B69H922,B07L67ZT1J,B01MYFV2W4,B00EZH5KRC,B018HC1W1S,B011OZ9U1Y,B0043E6DV4,B008FM30UC,B00YBWVSA4,B0816WGJ6H,B0091YQOMO,B00QW2G22U,B08C79VD9G,B00Y1PZP8C,B00EZHHPU2,B082SX3CRL";
allAsinsToDelete ="B0009XE3RY,B0045W7LLK,B08C7DT1V4,B071GRB37V,B00EZHJDW0,B0076OW6Z0,B01AWYTS9C,B00FYWENHK,B00EZHKJ82";
allAsinsToDelete ="B0076OW6Z0,B01AWYTS9C,B00FYWENHK,B00EZHKJ82";
allAsinsToDelete ="B004444482";
ii = allAsinsToDelete.split(",");

for (const asin of ii) {
  console.log(`🧹 Deleting listing for ASIN: ${asin}`);

  await page.getByRole('textbox', { name: 'Search SKU, Title/Keyword,' }).fill(asin);
  await page.waitForTimeout(500);
  await page.waitForLoadState('domcontentloaded', { timeout: 3000 });
  await page.waitForLoadState('load', { timeout: 3000 });
  await page.waitForLoadState('networkidle', { timeout: 3000 });

  await page.waitForSelector('div.JanusTable-module__tableContentRow--MGDsi', { state: 'attached', timeout: 30000 });
  
  // await page.pause();
  const text = await page.locator("[id^='TRIO-'] slot").first().textContent();
  console.log("Matched slot text:", text);
  // if(String(statusToSearch) === String(text.toLocaleLowerCase())) { console.log("ok"); } else { console.log("not ok"); }

  try {
    await page.getByText('').click(); // context menu icon
    await page.getByRole('button', { name: 'open dropdown' }).click();
    await page.getByRole('menuitem', { name: 'Delete listing' }).click();
    await page.getByRole('button', { name: 'Delete listing' }).click();
    await page.getByRole('button', { name: 'dismiss' }).click();

  } catch (err) {
    console.warn(`⚠️ Could not delete ASIN ${asin}:`, err);
  }
  countDeleted++;
  await page.waitForTimeout(200); // optional short delay between deletions
}


        const pagination = page.locator('kat-pagination');
        const totalItems    = Number(await pagination.getAttribute('total-items'));
        const itemsPerPage  = Number(await pagination.getAttribute('items-per-page'));
        const totalPages  = Math.ceil(totalItems / itemsPerPage);// compute pages (round up)
        
        const nextButton = await page.evaluateHandle(() => {// Try to find the "next" button inside shadow DOM
          const pagination = document.querySelector('kat-pagination');
          if (!pagination) return null;

          const shadow = pagination.shadowRoot;
          return shadow?.querySelector('[part="pagination-nav-right"]');
        });

        // const tableRows  = page.locator('div.JanusTable-module__tableContentRow--MGDsi');
        let pg = 1;
        let reportWasOnPage = 1;
        console.log("******* done *****" + countDeleted );//+ runTime(startTest)

  
});
